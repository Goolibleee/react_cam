(this.webpackJsonpbarcode=this.webpackJsonpbarcode||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o),c=n(11),i=n.n(c),a=(n(16),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),o(e),r(e),c(e),i(e)}))}),d=n(5),s=(n(17),n(25)),l=n(3);var u=function(e){var t=Object(o.useRef)(),n=Object(o.useRef)(),r=Object(o.useRef)(),c=Object(o.useState)(),i=Object(d.a)(c,2),a=i[0],u=i[1],g=Object(o.useState)([0,0]),h=Object(d.a)(g,2),v=h[0],f=h[1];Object(o.useEffect)((function(){a&&(e.onScan(a.data),u(null))}),[a]),Object(o.useEffect)((function(){var e=!0;console.log("Set interval");var t=setInterval((function(){e?requestAnimationFrame(b):console.log("Unmounted reader call")}),2e3);return function(){console.log("Clear interval for reader"),e=!1,clearInterval(t)}}),[]),Object(o.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",zoom:!0}}).then((function(e){console.log(e),console.log("TEST");try{var n=e.getVideoTracks(),o=Object(d.a)(n,1)[0],r=o.getCapabilities();o.getSettings();t.current.srcObject=e,t.current.setAttribute("playsinline",!0),t.current.play();var c=t.current.videoWidth,i=t.current.videoHeight;if(f([c,i]),console.log("Set resulution "+c.toString()+"x"+i.toString()),r.focusDistance){document.getElementsById("text").innerHtml("Change focus");o.applyConstraints({advanced:[{focusMode:"auto",focusDistance:r.focusDistance.min}]})}else document.getElementsById("text").innerHtml("Cannot change focus")}catch(a){}})),console.log(window.innerWidth.toString()+"x"+window.innerHeight.toString())}),[t]),Object(o.useEffect)((function(){var e=r.current.getContext("2d"),n=t.current.videoWidth,o=t.current.videoHeight;console.log("Resolution changed "+n.toString()+"x"+o.toString()),x(e,{x:0,y:o/2-75,x1:n,y1:o/2-75},{color:"red",width:5}),x(e,{x:0,y:o/2+75,x1:n,y1:o/2+75},{color:"red",width:5}),x(e,{x:0,y:o/2-75,x1:0,y1:o/2+75},{color:"red",width:5}),x(e,{x:n,y:o-75,x1:n,y1:o/2+75},{color:"red",width:5}),x(e,{x:0,y:3,x1:n,y1:3},{color:"green",width:5}),x(e,{x:3,y:0,x1:3,y1:o},{color:"green",width:5}),x(e,{x:0,y:o-3,x1:n,y1:o-3},{color:"green",width:5}),x(e,{x:n-3,y:0,x1:n-3,y1:o},{color:"green",width:5})}),[v]);var x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.x,r=t.y,c=t.x1,i=t.y1,a=n.color,d=void 0===a?"black":a,s=n.width,l=void 0===s?1:s;e.beginPath(),e.moveTo(o,r),e.lineTo(c,i),e.strokeStyle=d,e.lineWidth=l,e.stroke()};function b(){console.log("tick"),console.log(t.current.videoHeight.toString()+"x"+t.current.videoWidth);var e=t.current.videoWidth,o=t.current.videoHeight;n.current.height=e,n.current.width=o,console.log("Resolution changed "+e.toString()+"x"+o.toString()),Object(s.a)({method:"post",url:"http://10.0.0.68:8080/uploadImage",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}),n.current.getContext("2d").drawImage(t.current,0,0,n.current.width,n.current.height)}return Object(l.jsxs)("div",{children:[Object(l.jsx)("canvas",{id:"overlay",className:"overlay",ref:r}),Object(l.jsx)("canvas",{id:"canvas",className:"canvas",ref:n,hidden:!0}),Object(l.jsx)("video",{id:"video",ref:t}),Object(l.jsx)("div",{id:"text",children:"Test 0"}),Object(l.jsx)("button",{type:"button",onClick:function(){return function(){console.log("Capture");var e=n.current.getContext("2d"),o=t.current.videoWidth,c=t.current.videoHeight;n.current.width=o,n.current.height=c,e.drawImage(t.current,0,0,n.current.width,n.current.height),r.current.height=t.current.videoHeight,r.current.width=t.current.videoWidth,f([o,c]);var i=n.current.toDataURL("image/png");Object(s.a)({method:"post",mode:"no-cors",crossDomain:"true",url:"http://10.0.0.68:8080/uploadImage",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS"},withCredentials:!0,credentials:"same-origin",data:{image:i}})}()},children:" Capture "}),Object(l.jsxs)("h3",{children:["v ","0.1.1"]})]})};i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(u,{})}),document.getElementById("root")),a()}},[[23,1,2]]]);
//# sourceMappingURL=main.3bad323e.chunk.js.map