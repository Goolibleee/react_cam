(this.webpackJsonpbarcode=this.webpackJsonpbarcode||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),c=n(11),i=n.n(c),a=(n(16),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),c(e),i(e)}))}),u=n(5),d=(n(17),n(25)),l=n(3);var s=function(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),o=Object(r.useRef)(),c=Object(r.useState)(),i=Object(u.a)(c,2),a=i[0],s=i[1],g=Object(r.useState)([0,0]),h=Object(u.a)(g,2),v=h[0],f=h[1];Object(r.useEffect)((function(){a&&(e.onScan(a.data),s(null))}),[a]),Object(r.useEffect)((function(){var e=!0;console.log("Set interval");var t=setInterval((function(){e?requestAnimationFrame(b):console.log("Unmounted reader call")}),2e3);return function(){console.log("Clear interval for reader"),e=!1,clearInterval(t)}}),[]),Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((function(e){console.log(e),console.log("TEST");try{t.current.srcObject=e,t.current.setAttribute("playsinline",!0),t.current.play();var n=t.current.videoWidth,r=t.current.videoHeight;f([n,r]),console.log("Set resulution "+n.toString()+"x"+r.toString())}catch(o){}})),console.log(window.innerWidth.toString()+"x"+window.innerHeight.toString())}),[t]),Object(r.useEffect)((function(){var e=o.current.getContext("2d"),n=t.current.videoWidth,r=t.current.videoHeight;console.log("Resolution changed "+n.toString()+"x"+r.toString()),x(e,{x:20,y:20,x1:20,y1:100}),x(e,{x:50,y:50,x1:200,y1:100},{color:"red"}),x(e,{x:300,y:250,x1:260,y1:70},{color:"green",width:5}),x(e,{x:70,y:240,x1:160,y1:120},{color:"blue"}),x(e,{x:0,y:3,x1:n,y1:3},{color:"green",width:5}),x(e,{x:3,y:0,x1:3,y1:r},{color:"green",width:5}),x(e,{x:0,y:r-3,x1:n,y1:r-3},{color:"green",width:5}),x(e,{x:n-3,y:0,x1:n-3,y1:r},{color:"green",width:5})}),[v]);var x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.x,o=t.y,c=t.x1,i=t.y1,a=n.color,u=void 0===a?"black":a,d=n.width,l=void 0===d?1:d;e.beginPath(),e.moveTo(r,o),e.lineTo(c,i),e.strokeStyle=u,e.lineWidth=l,e.stroke()};function b(){console.log("tick"),console.log(t.current.videoHeight.toString()+"x"+t.current.videoWidth);var e=t.current.videoWidth,r=t.current.videoHeight;n.current.height=e,n.current.width=r,console.log("Resolution changed "+e.toString()+"x"+r.toString()),n.current.getContext("2d").drawImage(t.current,0,0,n.current.width,n.current.height)}return Object(l.jsxs)("div",{children:[Object(l.jsx)("canvas",{id:"overlay",className:"overlay",ref:o}),Object(l.jsx)("canvas",{id:"canvas",className:"canvas",ref:n,hidden:!0}),Object(l.jsx)("video",{id:"video",ref:t}),Object(l.jsx)("div",{children:"Test 0"}),Object(l.jsx)("button",{type:"button",onClick:function(){return function(){console.log("Capture");var e=n.current.getContext("2d"),r=t.current.videoWidth,c=t.current.videoHeight;n.current.width=r,n.current.height=c,e.drawImage(t.current,0,0,n.current.width,n.current.height),o.current.height=t.current.videoHeight,o.current.width=t.current.videoWidth,f([r,c]);var i=n.current.toDataURL("image/png");Object(d.a)({method:"post",mode:"no-cors",crossDomain:"true",url:"https://10.0.0.68:8080/uploadImage",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS"},withCredentials:!0,credentials:"same-origin",data:{image:i}})}()},children:" Capture "})]})};i.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(s,{})}),document.getElementById("root")),a()}},[[23,1,2]]]);
//# sourceMappingURL=main.af8fe084.chunk.js.map