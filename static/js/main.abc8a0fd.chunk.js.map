{"version":3,"sources":["reportWebVitals.js","Reader.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","Reader","props","videoRef","useRef","canvasRef","overlayRef","_useState","useState","_useState2","_slicedToArray","result","setResult","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","resolution","setResolution","useEffect","onScan","data","isMounted","console","log","inter","setInterval","requestAnimationFrame","tick","clearInterval","window","navigator","mediaDevices","getUserMedia","video","facingMode","stream","current","srcObject","setAttribute","play","imageWidth","videoWidth","imageHeight","videoHeight","toString","_unused","innerWidth","innerHeight","ctx","getContext","drawLine","x","y","x1","y1","color","width","context","info","style","arguments","length","undefined","_style$color","_style$width","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","_jsxs","children","_jsx","id","className","ref","hidden","type","onClick","canvas","height","drawImage","img","toDataURL","axios","method","url","headers","image","capture","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.abc8a0fd.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport Webcam from \"react-webcam\";\nimport \"./Reader.css\";\nimport axios from \"axios\";\n\nconst videoConstraints = {\n    width: 640,\n    height: 480,\n    facingMode: \"user\"\n};\n\nfunction Reader(props) {\n    const videoRef = useRef();\n    const webcamRef = useRef();\n    const canvasRef = useRef();\n    const overlayRef = useRef();\n    const [result, setResult] = useState();\n    const [width, setWidth] = useState();\n    const [height, setHeight] = useState();\n    const [resolution, setResolution] = useState([0,0]);\n\n    useEffect(\n        function () {\n            if (result) {\n                props.onScan(result.data);\n                setResult(null);\n            }\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [result]\n    );\n\n    useEffect(function () {\n        let isMounted = true;\n        console.log(\"Set interval\");\n        const inter = setInterval(() => {\n            if (!isMounted)\n            {\n                console.log(\"Unmounted reader call\");\n                return;\n            }\n            requestAnimationFrame(tick);\n        }, 2000);\n        return () => {\n            console.log(\"Clear interval for reader\");\n            isMounted = false;\n            clearInterval(inter);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(\n        function () {\n            window.navigator.mediaDevices\n                .getUserMedia({ video: { facingMode: \"environment\" } })\n                .then(function (stream) {\n                    console.log(stream);\n                    console.log(\"TEST\");\n                    try {\n                        videoRef.current.srcObject = stream;\n                        videoRef.current.setAttribute(\"playsinline\", true); // required to tell iOS safari we don't want fullscreen\n                        videoRef.current.play();\n                        const imageWidth  = videoRef.current.videoWidth;\n                        const imageHeight = videoRef.current.videoHeight;\n                        setResolution([imageWidth, imageHeight]);\n                        console.log(\"Set resulution \" + imageWidth.toString() + \"x\" + imageHeight.toString());\n                    } catch {}\n                });\n            console.log(window.innerWidth.toString() + \"x\" + window.innerHeight.toString());\n        },\n        [videoRef]\n    );\n    useEffect(\n        function () {\n            var ctx = overlayRef.current.getContext(\"2d\");\n            const imageWidth  = videoRef.current.videoWidth;\n            const imageHeight = videoRef.current.videoHeight;\n            console.log(\"Resolution changed \" + imageWidth.toString() + \"x\" + imageHeight.toString());\n            drawLine(ctx, { x: 20, y: 20, x1: 20, y1: 100 });\n\n            drawLine(ctx, { x: 50, y: 50, x1: 200, y1: 100 }, { color: 'red' });\n\n            drawLine(ctx, { x: 300, y: 250, x1: 260, y1: 70 }, { color: 'green', width: 5 });\n\n            drawLine(ctx, { x: 70, y: 240, x1: 160, y1: 120 }, { color: 'blue' });\n\n            drawLine(ctx, { x: 0, y: 3, x1: imageWidth, y1: 3 }, { color: 'green', width: 5 });\n            drawLine(ctx, { x: 3, y: 0, x1: 3, y1: imageHeight }, { color: 'green', width: 5 });\n            drawLine(ctx, { x: 0, y: imageHeight-3, x1: imageWidth, y1: imageHeight-3 }, { color: 'green', width: 5 });\n            drawLine(ctx, { x: imageWidth-3, y: 0, x1: imageWidth-3, y1: imageHeight}, { color: 'green', width: 5 });\n\n        }, [resolution]\n    );\n    const drawLine = (context, info, style = {}) => {\n        const { x, y, x1, y1 } = info;\n        const { color = 'black', width = 1 } = style;\n\n        context.beginPath();\n        context.moveTo(x, y);\n        context.lineTo(x1, y1);\n        context.strokeStyle = color;\n        context.lineWidth = width;\n        context.stroke();\n    }\n\n/*\n    var sendBase64ToServer = function(base64) {\n        var httpPost = new XMLHttpRequest(),\n        path = \"http://127.0.0.1:8080/uploadImage\",\n        data = JSON.stringify({image: base64});\n        httpPost.onreadystatechange = function(err) {\n            if (httpPost.readyState == 4 && httpPost.status == 200){\n                console.log(httpPost.responseText);\n            } else {\n                console.log(err);\n            }\n        };\n        // Set the content type of the request to json since that's what's being sent\n        httpPost.setHeader('Content-Type', 'application/json');\n        httpPost.open(\"POST\", path, true);\n        httpPost.send(data);\n    };\n    var uploadImage = function(data, type){\n        sendBase64ToServer(data);\n    };\n*/\n    function capture() {\n        console.log(\"Capture\");\n        var canvas = canvasRef.current.getContext(\"2d\");\n        const imageWidth  = videoRef.current.videoWidth;\n        const imageHeight = videoRef.current.videoHeight;\n        canvasRef.current.width = imageWidth;\n        canvasRef.current.height = imageHeight;\n        canvas.drawImage(\n            videoRef.current,\n            0,\n            0,\n            canvasRef.current.width,\n            canvasRef.current.height\n        );\n        overlayRef.current.height = videoRef.current.videoHeight;\n        overlayRef.current.width = videoRef.current.videoWidth;\n        setResolution([imageWidth, imageHeight]);\n\n        const img = canvasRef.current.toDataURL('image/png');\n        axios({\n            method: \"post\",\n//            url: \"http://10.0.0.68:8080/uploadImage\",\n            url: \"http://localhost:8080/uploadImage\",\n            headers: {\n                \"Access-Control-Allow-Origin\": \"*\",\n                \"Content-Type\": \"application/json\"\n            },\n            data: {\n                image: img\n            }\n        });\n    }\n\n    function tick() {\n\n/*\n            var ctx = canvasRef.current.getContext(\"2d\");\n//            var ctx = canvasRef.current.getContext(\"2d\");\n\n            console.log('tick');\n\n            var videoElement = document.getElementById(\"video\")\n            console.log(videoRef.current.videoHeight.toString() + \"x\" + videoRef.current.videoWidth);\n            canvasRef.current.height = videoRef.current.videoHeight;\n            canvasRef.current.width = videoRef.current.videoWidth;\n\n//            const image = webcamRef.current.getScreenshot();\n            if (image) {\n                const str = image.toDataURL();\n                console.log(str);\n            }\n*/\n//            uploadImage(image, \"image/png\");\n/*\n            axios({\n                method: \"post\",\n                url: \"http://10.0.0.68:8080/uploadImage\",\n                headers: {\n                    \"Access-Control-Allow-Origin\": \"*\",\n                    \"Content-Type\": \"application/json\"\n                },\n                data: {\n                    image: image\n                }\n            });\n            console.log(image);\n*/\n\n            /*\n            ctx.drawImage(\n                videoRef.current,\n                0,\n                0,\n                canvasRef.current.width,\n                canvasRef.current.height\n            );\n            const str = canvasRef.toDataURL();\n            console.log(str);\n            var imageData = ctx.getImageData(\n                0,\n                0,\n                canvasRef.current.width,\n                canvasRef.current.height\n            );\n            BarcodeReader({\n                image: imageData,\n//                barcode: 'code-2of5',\n                barcode: 'coda-128',\n                options: {}\n            }).then(code => {\n                console.log('['+code+']');\n            }).catch(err => {\n                console.log(err);\n            })\n            */\n            /*\n            var code = jsQR(imageData.data, imageData.width, imageData.height, {\n                inversionAttempts: \"dontInvert\",\n            });\n            if (code) {\n                console.log(code.data);\n                setResult({ data: code.data, time: new Date() });\n            }\n            */\n            return;\n    }\n/*\n        <div>\n                <canvas id=\"canvas\" className=\"canvas\" ref={canvasRef} width={640} height={480}></canvas>\n                <Webcam id=\"webcam\" ref={webcamRef} screenshotFormat=\"image/png\" width={640} height={480}\n                    videoConstraints={videoConstraints}\n                />\n            <div>Test 2</div>\n        </div>\n*/\n\n    return (\n        <div>\n                <canvas id=\"overlay\" className=\"overlay\" ref={overlayRef}></canvas>\n                <canvas id=\"canvas\" className=\"canvas\" ref={canvasRef} hidden></canvas>\n                <video id=\"video\" ref={videoRef}/>\n            <div>Test 0</div>\n            <button type=\"button\" onClick={() => capture()}> Capture </button>\n        </div>\n    );\n}\n\nexport default Reader;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\nimport Reader from \"./Reader\";\n//import Scanner from \"./Scanner\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Reader />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}