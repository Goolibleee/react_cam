(this.webpackJsonpbarcode=this.webpackJsonpbarcode||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),c=n(11),i=n.n(c),a=(n(16),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),c(e),i(e)}))}),d=n(5),s=(n(17),n(25)),u=n(3);var l=function(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),o=Object(r.useRef)(),c=Object(r.useState)(),i=Object(d.a)(c,2),a=i[0],l=i[1],g=Object(r.useState)([0,0]),h=Object(d.a)(g,2),v=h[0],f=h[1];Object(r.useEffect)((function(){a&&(e.onScan(a.data),l(null))}),[a]),Object(r.useEffect)((function(){var e=!0;console.log("Set interval");var t=setInterval((function(){e?requestAnimationFrame(b):console.log("Unmounted reader call")}),2e3);return function(){console.log("Clear interval for reader"),e=!1,clearInterval(t)}}),[]),Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",zoom:!0}}).then((function(e){console.log(e),console.log("TEST");try{var n=e.getVideoTracks(),r=Object(d.a)(n,1)[0],o=r.getCapabilities();r.getSettings();t.current.srcObject=e,t.current.setAttribute("playsinline",!0),t.current.play();var c=t.current.videoWidth,i=t.current.videoHeight;if(f([c,i]),console.log("Set resulution "+c.toString()+"x"+i.toString()),o.focusDistance){document.getElementsById("text").innerHtml("Change focus");r.applyConstraints({advanced:[{focusMode:"auto",focusDistance:o.focusDistance.min}]})}else document.getElementsById("text").innerHtml("Cannot change focus")}catch(a){}})),console.log(window.innerWidth.toString()+"x"+window.innerHeight.toString())}),[t]),Object(r.useEffect)((function(){var e=o.current.getContext("2d"),n=t.current.videoWidth,r=t.current.videoHeight;console.log("Resolution changed "+n.toString()+"x"+r.toString()),x(e,{x:0,y:r/2-75,x1:n,y1:r/2-75},{color:"red",width:5}),x(e,{x:0,y:r/2+75,x1:n,y1:r/2+75},{color:"red",width:5}),x(e,{x:0,y:r/2-75,x1:0,y1:r/2+75},{color:"red",width:5}),x(e,{x:n,y:r-75,x1:n,y1:r/2+75},{color:"red",width:5}),x(e,{x:0,y:3,x1:n,y1:3},{color:"green",width:5}),x(e,{x:3,y:0,x1:3,y1:r},{color:"green",width:5}),x(e,{x:0,y:r-3,x1:n,y1:r-3},{color:"green",width:5}),x(e,{x:n-3,y:0,x1:n-3,y1:r},{color:"green",width:5})}),[v]);var x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.x,o=t.y,c=t.x1,i=t.y1,a=n.color,d=void 0===a?"black":a,s=n.width,u=void 0===s?1:s;e.beginPath(),e.moveTo(r,o),e.lineTo(c,i),e.strokeStyle=d,e.lineWidth=u,e.stroke()};function b(){console.log(t.current.videoHeight.toString()+"x"+t.current.videoWidth);var e=t.current.videoWidth,r=t.current.videoHeight;n.current.height=e,n.current.width=r,n.current.getContext("2d").drawImage(t.current,0,0,n.current.width,n.current.height)}return Object(u.jsxs)("div",{children:[Object(u.jsx)("canvas",{id:"overlay",className:"overlay",ref:o}),Object(u.jsx)("canvas",{id:"canvas",className:"canvas",ref:n,hidden:!0}),Object(u.jsx)("video",{id:"video",ref:t}),Object(u.jsx)("div",{id:"text",children:"Test 0"}),Object(u.jsx)("button",{type:"button",onClick:function(){return function(){console.log("Capture");var e=n.current.getContext("2d"),r=t.current.videoWidth,c=t.current.videoHeight;n.current.width=r,n.current.height=c,e.drawImage(t.current,0,0,n.current.width,n.current.height),o.current.height=t.current.videoHeight,o.current.width=t.current.videoWidth,f([r,c]);var i=n.current.toDataURL("image/png");Object(s.a)({method:"post",mode:"no-cors",crossDomain:"true",url:"https://10.0.0.68:8080/uploadImage",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS"},withCredentials:!1,credentials:"same-origin",data:{image:i}})}()},children:" Capture "}),Object(u.jsxs)("h3",{children:["v ","0.1.1"]})]})};i.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(l,{})}),document.getElementById("root")),a()}},[[23,1,2]]]);
//# sourceMappingURL=main.dc5aa732.chunk.js.map